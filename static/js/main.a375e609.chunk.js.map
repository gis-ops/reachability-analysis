{"version":3,"sources":["serviceWorker.js","hereConfig.js","Controls/SettingsObject.jsx","actions/actions.js","actions/map.js","reducers/map.js","reducers/index.js","Map/extraMarkers.js","Map/hereTileLayer.js","Map/Map.jsx","Controls/Settings.jsx","Controls/SearchControl.jsx","Controls/Controls.jsx","App.jsx","index.js"],"names":["Boolean","window","location","hostname","match","hereConfig","SettingsObject","Object","classCallCheck","this","userInput","geocodeResults","isochrones","receivedAt","results","isFetching","isFetchingIsochrones","settings","range","min","max","step","value","interval","mode","rangetype","parseGeocodeResponse","json","latLng","Response","View","length","processedResults","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Result","Symbol","iterator","next","done","address","Location","LocationType","push","title","Address","Label","description","PostalCode","displayposition","lat","DisplayPosition","Latitude","lng","Longitude","selected","err","return","parseIsochronesResponse","response","isoline","reverse","receiveReverseGeocodeResults","controlIndex","type","arguments","join","Date","now","fetchHereGeocode","payload","dispatch","requestGeocodeResults","url","URL","params","app_id","app_code","searchtext","inputValue","search","URLSearchParams","fetch","then","receiveGeocodeResults","fetchHereIsochrones","requestIsochronesResults","isolineParameters","center","start","ranges","rangeInSeconds","intervalInSeconds","rangeInMeters","intervalInMeters","processIsolineSettings","objectSpread","receiveIsochronesResults","fetchHereReverseGeocode","isoIndex","maxresults","prox","action","updateTextInput","updateSelectedAddress","setReverseGeocodeResult","addIsochronesControl","textInputIndex","zoomToIsochrones","initialState","event","controlIdx","mapEvents","state","console","log","initialIsochronesControlsState","controls","rootReducer","combineReducers","isochronesControls","concat","toConsumableArray","filter","item","i","map","control","result","ExtraMarkers","Icon","L","extend","options","iconSize","iconAnchor","popupAnchor","shadowAnchor","shadowSize","className","prefix","extraClasses","shape","icon","innerHTML","markerColor","svgBorderColor","svgOpacity","iconColor","number","svg","initialize","setOptions","createIcon","div","document","createElement","_createInner","bgPos","style","backgroundPosition","x","y","_setIconStyles","iconColorStyle","iconNumber","img","name","anchor","leafletName","size","divideBy","marginLeft","marginTop","width","height","createShadow","HereTileLayer","HERE","subdomains","minZoom","maxZoom","scheme","resource","mapId","format","appId","appCode","schemeStart","split","tileResolution","retina","tileServer","indexOf","tileUrl","_attributionUrl","template","prototype","call","_attributionText","onAdd","_attributionBBoxes","_fetchAttributionBBoxes","onRemove","_map","attributionControl","removeAttribution","off","_findCopyrightBBox","xmlhttp","XMLHttpRequest","onreadystatechange","readyState","status","_parseAttributionBBoxes","JSON","parse","responseText","open","send","providers","normal","boxes","j","box","on","_attributionProviders","visibleProviders","zoom","getZoom","visibleBounds","getBounds","minLevel","maxLevel","overlaps","attributions","provider","alt","label","attributionText","addAttribution","here","opts","hereReducedDay","hereHybridGreyDay","markersLayer","layerGroup","isochronesLayer","mapParams","zoomControl","layers","Map","createPane","opacity","baseMaps","HERE reduced.day","HERE hybrid.grey.day","addTo","position","brand","DomUtil","create","addControl","props","clearLayers","cnt","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","clearLayerByIndex","addIsochronesMarker","isMarkerPresent","prevProps","isochroneResultsReversed","scaleHsl","chroma","scale","colors","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","isochrone","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","component","isochroneComponent","addIsochrones","eventFeatures","featureGroup","eachLayer","layer","index","addLayer","fitBounds","prevState","updateMarkers","updateIsochrones","updateMap","idx","removeLayer","isPresent","obj","geometry","color","polygon","coordString","fillColor","weight","pane","bindTooltip","permanent","sticky","setTooltipContent","isochronesMarker","toString","that","marker","draggable","e","updatePosition","target","getLatLng","react_default","a","id","React","Component","connect","ownProps","transportModes","pedestrian","traffic","car","consumptionModel","customConsumptionDetails","truck","shippedHazardousGoods","limitedWeight","weightPerAxle","tunnelCategory","rangeTypes","distance","time","Settings","_this$props","controlindex","_this$props2","updateSettings","_this$props3","_ref","_this$props4","_ref2","_this$props5","_this","_this$props6","rangeSettings","onChange","intervalSettings","Button","Group","basic","keys","key","active","onClick","handleClickMode","Divider","handleRangetype","build","discrete","inverted","Input","placeholder","handleRangeValueChange","bind","handleIntervalValueChange","SearchControl","possibleConstructorReturn","getPrototypeOf","handleClick","titleProps","newIndex","activeIndex","setState","handleSearchChange","fetchGeocodeResults","handleResultSelect","handleFetchIsochrones","handleZoom","dataChanged","assertThisInitialized","isochronesTitle","debounce","userTextInput","text","data","_this2","isochronesResults","Segment","margin","Popup","trigger","content","react_edit_inline2_default","validate","customValidateText","activeClassName","paramName","change","minWidth","display","padding","fontWeight","fontSize","outline","border","circular","float","handleShow","fitted","Search","onSearchChange","onResultSelect","fluid","input","loading","disabled","isResultSelected","Container","Accordion","Title","Content","Controls_Settings","segmentStyle","zIndex","top","left","maxHeight","Controls","handleAddIsochronesControl","handleSettings","flex","minHeight","overflow","object","Controls_SearchControl","marginBottom","App","src_Map_Map","src_Controls_Controls","middleware","thunk","store","createStore","reducer","composeWithDevTools","applyMiddleware","apply","render","es","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.a375e609.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export const hereConfig = {\n  appId: 'jKco7gLGf0WWlvS5n2fl',\n  appCode: 'HQnCztY23zh2xiTPCFiTMA'\n}\n","export default class SettingsObject {\n  constructor() {\n    this.userInput = ''\n    this.geocodeResults = []\n    this.isochrones = {\n      receivedAt: null,\n      results: []\n    }\n    this.isFetching = false\n    this.isFetchingIsochrones = false\n    this.settings = {\n      range: {\n        min: 1,\n        max: 500,\n        step: 1,\n        value: 60\n      },\n      interval: {\n        min: 1,\n        max: 60,\n        step: 1,\n        value: 10\n      },\n      mode: 'car',\n      rangetype: 'distance'\n    }\n  }\n}\n","import { hereConfig } from '../hereConfig'\nimport SettingsObject from '../Controls/SettingsObject'\n\nexport const REQUEST_GEOCODE_RESULTS = 'REQUEST_GEOCODE_RESULTS'\nexport const REQUEST_ISOCHRONES_RESULTS = 'REQUEST_ISOCHRONES_RESULTS'\nexport const RECEIVE_GEOCODE_RESULTS = 'RECEIVE_GEOCODE_RESULTS'\nexport const RECEIVE_REVERSE_GEOCODE_RESULTS = 'RECEIVE_REVERSE_GEOCODE_RESULTS'\nexport const SET_USERTEXTINPUT = 'SET_USERTEXTINPUT'\nexport const ADD_ISOCHRONESCONTROL = 'ADD_ISOCHRONESCONTROL'\nexport const UPDATE_TEXTINPUT = 'UPDATE_TEXTINPUT'\nexport const UPDATE_SELECTED_ADDRESS = 'UPDATE_SELECTED_ADDRESS'\nexport const REMOVE_ISOCHRONES_CONTROL = 'REMOVE_ISOCHRONES_CONTROL'\nexport const UPDATE_SETTINGS = 'UPDATE_SETTINGS'\nexport const RECEIVE_ISOCHRONES_RESULTS = 'RECEIVE_ISOCHRONES_RESULTS'\n\nconst parseGeocodeResponse = (json, latLng) => {\n  if (json.Response && json.Response.View.length > 0) {\n    let processedResults = []\n\n    for (const address of json.Response.View[0].Result) {\n      if (address.Location && address.Location.LocationType === 'point') {\n        processedResults.push({\n          title: address.Location.Address.Label,\n          description: address.Location.Address.PostalCode,\n          displayposition: {\n            lat: latLng\n              ? latLng.lat\n              : address.Location.DisplayPosition.Latitude,\n            lng: latLng\n              ? latLng.lng\n              : address.Location.DisplayPosition.Longitude\n          },\n          selected: false\n        })\n      }\n    }\n    return processedResults\n  }\n\n  return []\n}\n\nconst parseIsochronesResponse = json => {\n  if (json.response && json.response.isoline.length > 0) {\n    const isolinesReversed = json.response.isoline.reverse()\n    return isolinesReversed\n  }\n\n  return []\n}\n\nexport const receiveGeocodeResults = (controlIndex, json) => ({\n  type: RECEIVE_GEOCODE_RESULTS,\n  controlIndex,\n  results: parseGeocodeResponse(json),\n  receivedAt: Date.now(),\n  reverse: false\n})\n\nexport const receiveIsochronesResults = (controlIndex, json) => ({\n  type: RECEIVE_ISOCHRONES_RESULTS,\n  controlIndex,\n  results: parseIsochronesResponse(json),\n  receivedAt: Date.now(),\n  reverse: false\n})\n\nconst receiveReverseGeocodeResults = (\n  controlIndex,\n  json,\n  latLng,\n  preFetch = false\n) => ({\n  type: RECEIVE_REVERSE_GEOCODE_RESULTS,\n  controlIndex,\n  results: preFetch\n    ? [\n        {\n          title: [json.lat, json.lng].join(','),\n          description: '',\n          DisplayPosition: {\n            lat: json.lat,\n            lng: json.lng\n          },\n          selected: true\n        }\n      ]\n    : parseGeocodeResponse(json, latLng),\n  receivedAt: Date.now(),\n  reverse: true\n})\n\nconst setReverseGeocodeResult = (controlIndex, action) => dispatch => {\n  dispatch(\n    updateTextInput({\n      controlIndex: controlIndex,\n      inputValue: action.results[0].title\n    })\n  )\n\n  dispatch(\n    updateSelectedAddress({\n      controlIndex: controlIndex,\n      inputValue: action.results[0].title\n    })\n  )\n}\n\nconst processIsolineSettings = (settings, center) => {\n  const isolineParameters = {}\n\n  isolineParameters.start = center.lat + ',' + center.lng\n  isolineParameters.mode = 'fastest;' + settings.mode\n  isolineParameters.rangetype = settings.rangetype\n\n  // seconds\n  const ranges = []\n  if (settings.rangetype === 'time') {\n    let rangeInSeconds = settings.range.value * 60\n    const intervalInSeconds = settings.interval.value * 60\n\n    // 600/100\n    while (rangeInSeconds > 0) {\n      ranges.push(rangeInSeconds)\n      rangeInSeconds -= intervalInSeconds\n    }\n\n    isolineParameters.range = ranges.join(',')\n\n    // meters\n  } else if (settings.rangetype === 'distance') {\n    let rangeInMeters = settings.range.value * 1000\n    const intervalInMeters = settings.interval.value * 1000\n\n    // 600/100\n    while (rangeInMeters > 0) {\n      ranges.push(rangeInMeters)\n      rangeInMeters -= intervalInMeters\n    }\n\n    isolineParameters.range = ranges.join(',')\n  }\n  return isolineParameters\n}\n\nexport const fetchHereGeocode = payload => dispatch => {\n  dispatch(requestGeocodeResults(payload.controlIndex))\n\n  let url = new URL('https://geocoder.api.here.com/6.2/geocode.json'),\n    params = {\n      app_id: hereConfig.appId,\n      app_code: hereConfig.appCode,\n      searchtext: payload.inputValue\n    }\n\n  url.search = new URLSearchParams(params)\n\n  return fetch(url)\n    .then(response => response.json())\n    .then(json => dispatch(receiveGeocodeResults(payload.controlIndex, json)))\n}\n\nexport const fetchHereIsochrones = payload => dispatch => {\n  dispatch(requestIsochronesResults(payload.controlIndex))\n\n  const isolineParameters = processIsolineSettings(\n    payload.settings,\n    payload.center\n  )\n\n  let url = new URL(\n      'https://isoline.route.api.here.com/routing/7.2/calculateisoline.json'\n    ),\n    params = {\n      app_id: hereConfig.appId,\n      app_code: hereConfig.appCode,\n      ...isolineParameters\n    }\n\n  url.search = new URLSearchParams(params)\n\n  return fetch(url)\n    .then(response => response.json())\n    .then(json =>\n      dispatch(receiveIsochronesResults(payload.controlIndex, json))\n    )\n}\n\nexport const fetchHereReverseGeocode = payload => dispatch => {\n  // fake response\n  dispatch(\n    receiveReverseGeocodeResults(\n      payload.isoIndex,\n      { lat: payload.lat, lng: payload.lng },\n      true\n    )\n  )\n\n  dispatch(requestGeocodeResults(payload.isoIndex))\n\n  const radius = 250\n\n  let url = new URL(\n      'https://reverse.geocoder.api.here.com/6.2/reversegeocode.json'\n    ),\n    params = {\n      app_id: hereConfig.appId,\n      app_code: hereConfig.appCode,\n      mode: 'retrieveAddresses',\n      maxresults: 1,\n      prox: [payload.lat, payload.lng, radius].join(',')\n    }\n\n  url.search = new URLSearchParams(params)\n\n  return fetch(url)\n    .then(response => response.json())\n    .then(json =>\n      dispatch(\n        receiveReverseGeocodeResults(payload.isoIndex, json, {\n          lat: payload.lat,\n          lng: payload.lng\n        })\n      )\n    )\n    .then(action => dispatch(setReverseGeocodeResult(payload.isoIndex, action)))\n}\n\nexport const requestIsochronesResults = controlIndex => ({\n  type: REQUEST_ISOCHRONES_RESULTS,\n  controlIndex\n})\n\nexport const requestGeocodeResults = controlIndex => ({\n  type: REQUEST_GEOCODE_RESULTS,\n  controlIndex\n})\n\nexport const addIsochronesControl = () => ({\n  type: ADD_ISOCHRONESCONTROL,\n  payload: new SettingsObject()\n})\n\nexport const removeIsochronesControl = controlIndex => ({\n  type: REMOVE_ISOCHRONES_CONTROL,\n  payload: controlIndex\n})\n\nexport const updateTextInput = textInputIndex => ({\n  type: UPDATE_TEXTINPUT,\n  payload: textInputIndex\n})\n\nexport const updateSelectedAddress = textInputIndex => ({\n  type: UPDATE_SELECTED_ADDRESS,\n  payload: textInputIndex\n})\n\nexport const updateSettings = payload => ({\n  type: UPDATE_SETTINGS,\n  payload: payload\n})\n","export const ZOOM_TO_ISOCHRONES = 'ZOOM_TO_ISOCHRONES'\n\nexport const zoomToIsochrones = controlIndex => ({\n  type: ZOOM_TO_ISOCHRONES,\n  receivedAt: Date.now(),\n  controlIndex\n})\n","import { ZOOM_TO_ISOCHRONES } from '../actions/map'\n\nconst initialState = {\n  event: null,\n  controlIdx: null,\n  receivedAt: null\n}\n\nconst mapEvents = (state = initialState, action) => {\n  console.log(action)\n  switch (action.type) {\n    case ZOOM_TO_ISOCHRONES:\n      return {\n        ...state,\n        event: action.type,\n        controlIndex: action.controlIndex,\n        receivedAt: action.receivedAt\n      }\n    default:\n      return state\n  }\n}\n\nexport default mapEvents\n","import { combineReducers } from 'redux'\nimport {\n  REQUEST_GEOCODE_RESULTS,\n  REQUEST_ISOCHRONES_RESULTS,\n  RECEIVE_GEOCODE_RESULTS,\n  RECEIVE_REVERSE_GEOCODE_RESULTS,\n  RECEIVE_ISOCHRONES_RESULTS,\n  ADD_ISOCHRONESCONTROL,\n  REMOVE_ISOCHRONES_CONTROL,\n  UPDATE_TEXTINPUT,\n  UPDATE_SELECTED_ADDRESS,\n  UPDATE_SETTINGS\n} from '../actions/actions'\n\nimport mapEvents from './map'\n\nimport SettingsObject from '../Controls/SettingsObject'\n\nconst initialIsochronesControlsState = {\n  controls: [new SettingsObject()]\n}\n\nconst isochronesControls = (state = initialIsochronesControlsState, action) => {\n  console.log(action)\n  switch (action.type) {\n    case ADD_ISOCHRONESCONTROL:\n      return {\n        ...state,\n        controls: [...state.controls, action.payload]\n      }\n    case REMOVE_ISOCHRONES_CONTROL:\n      return {\n        ...state,\n        controls: state.controls.filter(\n          (item, i) => i !== action.payload.controlIndex\n        )\n      }\n    case UPDATE_TEXTINPUT:\n      return {\n        ...state,\n        controls: state.controls.map((control, i) =>\n          i === action.payload.controlIndex\n            ? { ...control, userInput: action.payload.inputValue }\n            : control\n        )\n      }\n    case REQUEST_ISOCHRONES_RESULTS:\n      return {\n        ...state,\n        controls: state.controls.map((control, i) =>\n          i === action.controlIndex\n            ? { ...control, isFetchingIsochrones: true }\n            : control\n        )\n      }\n    case REQUEST_GEOCODE_RESULTS:\n      return {\n        ...state,\n        controls: state.controls.map((control, i) =>\n          i === action.controlIndex ? { ...control, isFetching: true } : control\n        )\n      }\n    case RECEIVE_GEOCODE_RESULTS:\n      return {\n        ...state,\n        controls: state.controls.map((control, i) =>\n          i === action.controlIndex\n            ? {\n                ...control,\n                isFetching: false,\n                geocodeResults: action.results,\n                reverse: action.reverse\n              }\n            : control\n        )\n      }\n    case RECEIVE_REVERSE_GEOCODE_RESULTS:\n      return {\n        ...state,\n        controls: state.controls.map((control, i) =>\n          i === action.controlIndex\n            ? {\n                ...control,\n                isFetching: false,\n                geocodeResults: action.results,\n                reverse: action.reverse\n              }\n            : control\n        )\n      }\n    case UPDATE_SELECTED_ADDRESS:\n      return {\n        ...state,\n        controls: state.controls.map((control, i) =>\n          i === action.payload.controlIndex\n            ? {\n                ...control,\n                geocodeResults: control.geocodeResults.map(result =>\n                  result.title === action.payload.inputValue\n                    ? { ...result, selected: true }\n                    : { ...result, selected: false }\n                )\n              }\n            : control\n        )\n      }\n    case UPDATE_SETTINGS:\n      return {\n        ...state,\n        controls: state.controls.map((control, i) =>\n          i === action.controlIndex\n            ? {\n                ...control,\n                settings: action.payload.settings\n              }\n            : control\n        )\n      }\n    case RECEIVE_ISOCHRONES_RESULTS:\n      return {\n        ...state,\n        controls: state.controls.map((control, i) =>\n          i === action.controlIndex\n            ? {\n                ...control,\n                isFetchingIsochrones: false,\n                isochrones: {\n                  results: action.results,\n                  receivedAt: action.receivedAt\n                }\n              }\n            : control\n        )\n      }\n    default:\n      return state\n  }\n}\n\nconst rootReducer = combineReducers({\n  isochronesControls,\n  mapEvents\n})\n\nexport default rootReducer\n","import * as L from 'leaflet'\n\nvar ExtraMarkers = {}\n\nExtraMarkers.Icon = L.Icon.extend({\n  options: {\n    iconSize: [35, 45],\n    iconAnchor: [17, 42],\n    popupAnchor: [1, -32],\n    shadowAnchor: [10, 12],\n    shadowSize: [36, 16],\n    className: '',\n    prefix: '',\n    extraClasses: '',\n    shape: 'circle',\n    icon: '',\n    innerHTML: '',\n    markerColor: 'red',\n    svgBorderColor: '#fff',\n    svgOpacity: 1,\n    iconColor: '#fff',\n    number: '',\n    svg: false\n  },\n  initialize: function(options) {\n    options = L.Util.setOptions(this, options)\n  },\n  createIcon: function() {\n    var div = document.createElement('div'),\n      options = this.options\n    if (options.icon) {\n      div.innerHTML = this._createInner()\n    }\n    if (options.innerHTML) {\n      div.innerHTML = options.innerHTML\n    }\n    if (options.bgPos) {\n      div.style.backgroundPosition =\n        -options.bgPos.x + 'px ' + -options.bgPos.y + 'px'\n    }\n    if (!options.svg) {\n      this._setIconStyles(div, options.shape + '-' + options.markerColor)\n    } else {\n      this._setIconStyles(div, 'svg')\n    }\n    return div\n  },\n  _createInner: function() {\n    var iconColorStyle = '',\n      iconNumber = '',\n      options = this.options\n    if (options.iconColor) {\n      iconColorStyle = \"style='color: \" + options.iconColor + \"' \"\n    }\n    if (options.number) {\n      iconNumber = \"number='\" + options.number + \"' \"\n    }\n    if (options.svg) {\n      var svg =\n        '<svg xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 69.529271 95.44922\" style=\"fill:' +\n        options.markerColor +\n        ';stroke:' +\n        options.svgBorderColor +\n        ';fill-opacity:' +\n        options.svgOpacity +\n        ';\" height=\"100%\" width=\"100%\" version=\"1.1\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:dc=\"http://purl.org/dc/elements/1.1/\"><g transform=\"translate(-139.52 -173.21)\"><path d=\"m174.28 173.21c-19.199 0.00035-34.764 15.355-34.764 34.297 0.007 6.7035 1.5591 12.813 5.7461 18.854l0.0234 0.0371 28.979 42.262 28.754-42.107c3.1982-5.8558 5.9163-11.544 6.0275-19.045-0.0001-18.942-15.565-34.298-34.766-34.297z\"/></g></svg>'\n      if (options.shape === 'square') {\n        svg =\n          '<svg xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 69.457038 96.523441\" style=\"fill:' +\n          options.markerColor +\n          ';stroke:' +\n          options.svgBorderColor +\n          ';fill-opacity:' +\n          options.svgOpacity +\n          ';\" height=\"100%\" width=\"100%\" version=\"1.1\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:dc=\"http://purl.org/dc/elements/1.1/\"><g transform=\"translate(-545.27 -658.39)\"><path d=\"m545.27 658.39v65.301h22.248l12.48 31.223 12.676-31.223h22.053v-65.301h-69.457z\"/></g></svg>'\n      }\n      if (options.shape === 'star') {\n        svg =\n          '<svg style=\"top:0; fill:' +\n          options.markerColor +\n          ';stroke:' +\n          options.svgBorderColor +\n          ';fill-opacity:' +\n          options.svgOpacity +\n          ';\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns=\"http://www.w3.org/2000/svg\" height=\"100%\" width=\"100%\" version=\"1.1\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:dc=\"http://purl.org/dc/elements/1.1/\" viewBox=\"0 0 77.690999 101.4702\"><g transform=\"translate(-101.15 -162.97)\"><g transform=\"matrix(1 0 0 1.0165 -65.712 -150.28)\"><path d=\"m205.97 308.16-11.561 11.561h-16.346v16.346l-11.197 11.197 11.197 11.197v15.83h15.744l11.615 33.693 11.467-33.568 0.125-0.125h16.346v-16.346l11.197-11.197-11.197-11.197v-15.83h-15.83l-11.561-11.561z\"/></g></g></svg>'\n      }\n      if (options.shape === 'penta') {\n        svg =\n          '<svg style=\"fill:' +\n          options.markerColor +\n          ';stroke:' +\n          options.svgBorderColor +\n          ';fill-opacity:' +\n          options.svgOpacity +\n          ';\"   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 71.550368 96.362438\" height=\"100%\" width=\"100%\" version=\"1.1\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:dc=\"http://purl.org/dc/elements/1.1/\"><g transform=\"translate(-367.08 -289.9)\"><path d=\"m367.08 322.5 17.236-32.604h36.151l18.164 32.25-35.665 64.112z\"/></g></svg>'\n      }\n      return (\n        svg +\n        '<i ' +\n        iconNumber +\n        iconColorStyle +\n        \"class='\" +\n        options.extraClasses +\n        ' ' +\n        options.prefix +\n        ' ' +\n        options.icon +\n        \"'></i>\"\n      )\n    }\n    return (\n      '<i ' +\n      iconNumber +\n      iconColorStyle +\n      \"class='\" +\n      options.extraClasses +\n      ' ' +\n      options.prefix +\n      ' ' +\n      options.icon +\n      \"'></i>\"\n    )\n  },\n  _setIconStyles: function(img, name) {\n    var options = this.options,\n      size = L.point(options[name === 'shadow' ? 'shadowSize' : 'iconSize']),\n      anchor,\n      leafletName\n    if (name === 'shadow') {\n      anchor = L.point(options.shadowAnchor || options.iconAnchor)\n      leafletName = 'shadow'\n    } else {\n      anchor = L.point(options.iconAnchor)\n      leafletName = 'icon'\n    }\n    if (!anchor && size) {\n      anchor = size.divideBy(2, true)\n    }\n\n    img.className =\n      'leaflet-marker-' +\n      leafletName +\n      ' extra-marker extra-marker-' +\n      name +\n      ' ' +\n      options.className\n    if (anchor) {\n      img.style.marginLeft = -anchor.x + 'px'\n      img.style.marginTop = -anchor.y + 'px'\n    }\n    if (size) {\n      img.style.width = size.x + 'px'\n      img.style.height = size.y + 'px'\n    }\n  },\n  createShadow: function() {\n    var div = document.createElement('div')\n    this._setIconStyles(div, 'shadow')\n    return div\n  }\n})\n\nExtraMarkers.icon = function(options) {\n  return new ExtraMarkers.Icon(options)\n}\n\nexport default ExtraMarkers\n","import * as L from 'leaflet'\n\nvar HereTileLayer = {}\n\n// class TileLayer.HERE\n// Tile layer for HERE maps tiles.\nHereTileLayer.HERE = L.TileLayer.extend({\n  options: {\n    subdomains: '1234',\n    minZoom: 2,\n    maxZoom: 18,\n\n    // option scheme: String = 'normal.day'\n    // The \"map scheme\", as documented in the HERE API.\n    scheme: 'normal.day',\n\n    // option resource: String = 'maptile'\n    // The \"map resource\", as documented in the HERE API.\n    resource: 'maptile',\n\n    // option mapId: String = 'newest'\n    // Version of the map tiles to be used, or a hash of an unique map\n    mapId: 'newest',\n\n    // option format: String = 'png8'\n    // Image format to be used (`png8`, `png`, or `jpg`)\n    format: 'png8',\n\n    // option appId: String = ''\n    // Required option. The `app_id` provided as part of the HERE credentials\n    appId: '',\n\n    // option appCode: String = ''\n    // Required option. The `app_code` provided as part of the HERE credentials\n    appCode: ''\n  },\n\n  initialize: function initialize(options) {\n    options = L.setOptions(this, options)\n\n    // Decide if this scheme uses the aerial servers or the basemap servers\n    var schemeStart = options.scheme.split('.')[0]\n    options.tileResolution = 256\n\n    if (L.Browser.retina) {\n      options.tileResolution = 512\n    }\n\n    //    {Base URL}{Path}/{resource (tile type)}/{map id}/{scheme}/{zoom}/{column}/{row}/{size}/{format}\n    //    ?app_id={YOUR_APP_ID}\n    //    &app_code={YOUR_APP_CODE}\n    //    &{param}={value}\n\n    var path =\n      '/{resource}/2.1/{resource}/{mapId}/{scheme}/{z}/{x}/{y}/{tileResolution}/{format}?app_id={appId}&app_code={appCode}'\n    var attributionPath =\n      '/maptile/2.1/copyright/{mapId}?app_id={appId}&app_code={appCode}'\n\n    var tileServer = 'base.maps.api.here.com'\n    if (\n      // eslint-disable-next-line\n      schemeStart == 'satellite' ||\n      // eslint-disable-next-line\n      schemeStart == 'terrain' ||\n      // eslint-disable-next-line\n      schemeStart == 'hybrid'\n    ) {\n      tileServer = 'aerial.maps.api.here.com'\n    }\n    if (options.scheme.indexOf('.traffic.') !== -1) {\n      tileServer = 'traffic.maps.api.here.com'\n    }\n\n    var tileUrl = 'https://{s}.' + tileServer + path\n\n    this._attributionUrl = L.Util.template(\n      'https://1.' + tileServer + attributionPath,\n      this.options\n    )\n\n    L.TileLayer.prototype.initialize.call(this, tileUrl, options)\n\n    this._attributionText = ''\n  },\n\n  onAdd: function onAdd(map) {\n    L.TileLayer.prototype.onAdd.call(this, map)\n\n    if (!this._attributionBBoxes) {\n      this._fetchAttributionBBoxes()\n    }\n  },\n\n  onRemove: function onRemove(map) {\n    L.TileLayer.prototype.onRemove.call(this, map)\n\n    this._map.attributionControl.removeAttribution(this._attributionText)\n\n    this._map.off('moveend zoomend resetview', this._findCopyrightBBox, this)\n  },\n\n  _fetchAttributionBBoxes: function _onMapMove() {\n    var xmlhttp = new XMLHttpRequest()\n    xmlhttp.onreadystatechange = L.bind(function() {\n      // eslint-disable-next-line\n      if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {\n        this._parseAttributionBBoxes(JSON.parse(xmlhttp.responseText))\n      }\n    }, this)\n    xmlhttp.open('GET', this._attributionUrl, true)\n    xmlhttp.send()\n  },\n\n  _parseAttributionBBoxes: function _parseAttributionBBoxes(json) {\n    if (!this._map) {\n      return\n    }\n    var providers = json[this.options.scheme.split('.')[0]] || json.normal\n    for (var i = 0; i < providers.length; i++) {\n      if (providers[i].boxes) {\n        for (var j = 0; j < providers[i].boxes.length; j++) {\n          var box = providers[i].boxes[j]\n          providers[i].boxes[j] = L.latLngBounds([\n            [box[0], box[1]],\n            [box[2], box[3]]\n          ])\n        }\n      }\n    }\n\n    this._map.on('moveend zoomend resetview', this._findCopyrightBBox, this)\n\n    this._attributionProviders = providers\n\n    this._findCopyrightBBox()\n  },\n\n  _findCopyrightBBox: function _findCopyrightBBox() {\n    if (!this._map) {\n      return\n    }\n    var providers = this._attributionProviders\n    var visibleProviders = []\n    var zoom = this._map.getZoom()\n    var visibleBounds = this._map.getBounds()\n\n    for (var i = 0; i < providers.length; i++) {\n      if (providers[i].minLevel < zoom && providers[i].maxLevel > zoom)\n        if (!providers[i].boxes) {\n          // No boxes = attribution always visible\n          visibleProviders.push(providers[i])\n          break\n        }\n\n      for (var j = 0; j < providers[i].boxes.length; j++) {\n        var box = providers[i].boxes[j]\n        if (visibleBounds.overlaps(box)) {\n          visibleProviders.push(providers[i])\n          break\n        }\n      }\n    }\n\n    var attributions = [\n      '<a href=\"https://legal.here.com/terms/serviceterms/gb/\">HERE maps</a>'\n    ]\n    // eslint-disable-next-line\n    for (var i = 0; i < visibleProviders.length; i++) {\n      var provider = visibleProviders[i]\n      attributions.push(\n        '<abbr title=\"' + provider.alt + '\">' + provider.label + '</abbr>'\n      )\n    }\n\n    var attributionText = ' ' + attributions.join(', ') + '. '\n\n    if (attributionText !== this._attributionText) {\n      this._map.attributionControl.removeAttribution(this._attributionText)\n      this._map.attributionControl.addAttribution(\n        (this._attributionText = attributionText)\n      )\n    }\n  }\n})\n\nHereTileLayer.here = function(opts) {\n  return new HereTileLayer.HERE(opts)\n}\n\nexport default HereTileLayer\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport L from 'leaflet'\nimport chroma from 'chroma-js'\nimport ExtraMarkers from './extraMarkers'\nimport HereTileLayer from './hereTileLayer'\nimport { fetchHereReverseGeocode } from '../actions/actions'\nimport PropTypes from 'prop-types'\n\nconst style = {\n  width: '100%',\n  height: '100vh'\n}\n\n// const CartoDB_VoyagerLabelsUnder = L.tileLayer(\n//   'https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}{r}.png',\n//   {\n//     attribution:\n//       '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n//     subdomains: 'abcd',\n//     maxZoom: 19\n//   }\n// )\n\nconst hereReducedDay = HereTileLayer.here({\n  appId: 'jKco7gLGf0WWlvS5n2fl',\n  appCode: 'HQnCztY23zh2xiTPCFiTMA',\n  scheme: 'reduced.day'\n})\n\nconst hereHybridGreyDay = HereTileLayer.here({\n  appId: 'jKco7gLGf0WWlvS5n2fl',\n  appCode: 'HQnCztY23zh2xiTPCFiTMA',\n  scheme: 'hybrid.grey.day'\n})\n\nconst markersLayer = L.layerGroup()\n\nconst isochronesLayer = L.layerGroup()\n\nconst mapParams = {\n  center: [40.655769, -73.938503],\n  zoomControl: false,\n  zoom: 13,\n  layers: [markersLayer, isochronesLayer, hereReducedDay]\n}\n\nclass Map extends React.Component {\n  static propTypes = {\n    isochronesControls: PropTypes.array.isRequired,\n    mapEvents: PropTypes.object\n  }\n  componentDidMount() {\n    this.map = L.map('map', mapParams)\n\n    var isochronesPane = this.map.createPane('isochronesPane')\n\n    isochronesPane.style.opacity = 0.9\n\n    const baseMaps = {\n      'HERE reduced.day': hereReducedDay,\n      'HERE hybrid.grey.day': hereHybridGreyDay\n    }\n\n    L.control.layers(baseMaps).addTo(this.map)\n\n    L.control\n      .zoom({\n        position: 'topright'\n      })\n      .addTo(this.map)\n\n    const brand = L.control({\n      position: 'bottomright'\n    })\n    brand.onAdd = function(map) {\n      var div = L.DomUtil.create('div', 'brand')\n      div.innerHTML =\n        '<a href=\"https://gis.ops.com\" target=\"_blank\"><div class=\"gis-ops-logo\"></div></a>'\n      return div\n    }\n    this.map.addControl(brand)\n  }\n\n  updateMarkers() {\n    const { isochronesControls } = this.props\n\n    markersLayer.clearLayers()\n\n    let cnt = 0\n    for (let isochrones of isochronesControls) {\n      // add marker\n      if (isochrones.geocodeResults.length > 0) {\n        for (let location of isochrones.geocodeResults) {\n          if (location.selected) {\n            // if a address is geocoded normally, clear layer beforehand\n\n            if (!isochrones.reverse) this.clearLayerByIndex(cnt)\n\n            this.addIsochronesMarker(location, cnt, this.isMarkerPresent(cnt))\n          }\n        }\n      }\n\n      cnt += 1\n    }\n  }\n\n  updateIsochrones(prevProps) {\n    const { isochronesControls } = this.props\n\n    isochronesLayer.clearLayers()\n\n    for (let i = 0; i < isochronesControls.length; i++) {\n      if (\n        isochronesControls[i].isochrones.results.length > 0\n        //&& isochronesControls[i].isochrones.receivedAt > prevIsochronesControls[i].isochrones.receivedAt\n      ) {\n        let cnt = 0\n        const isochroneResultsReversed =\n          isochronesControls[i].isochrones.results\n        const scaleHsl = chroma\n          .scale(['#f44242', '#f4be41', '#41f497'])\n          .mode('hsl')\n          .colors(isochronesControls[i].isochrones.results.length)\n\n        for (const isochrone of isochroneResultsReversed) {\n          for (const isochroneComponent of isochrone.component) {\n            this.addIsochrones(\n              isochroneComponent.shape,\n              isochronesControls[i].settings.rangetype === 'time'\n                ? isochrone.range / 60 + ' minutes'\n                : isochrone.range / 1000 + ' kilometers',\n              scaleHsl[cnt],\n              i\n            )\n          }\n          cnt += 1\n        }\n      }\n    }\n  }\n\n  updateMap(prevProps) {\n    const { mapEvents } = this.props\n    if (mapEvents.receivedAt > prevProps.mapEvents.receivedAt) {\n      let eventFeatures = L.featureGroup()\n\n      switch (mapEvents.event) {\n        case 'ZOOM_TO_ISOCHRONES':\n          isochronesLayer.eachLayer(function(layer) {\n            if (layer.options.index === mapEvents.controlIndex)\n              eventFeatures.addLayer(layer)\n          })\n\n          this.map.fitBounds(eventFeatures.getBounds())\n\n          break\n\n        default:\n          break\n      }\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    this.updateMarkers()\n    this.updateIsochrones(prevProps)\n    this.updateMap(prevProps)\n  }\n\n  clearLayerByIndex(idx) {\n    markersLayer.eachLayer(function(layer) {\n      if (layer.options.index === idx) markersLayer.removeLayer(layer)\n    })\n  }\n\n  isMarkerPresent(idx) {\n    let isPresent = false\n    markersLayer.eachLayer(function(layer) {\n      if (layer.options.index === idx) isPresent = true\n    })\n    return isPresent\n  }\n\n  updatePosition(obj) {\n    this.props.dispatch(\n      fetchHereReverseGeocode({\n        isoIndex: obj.isoIndex,\n        ...obj.latLng\n      })\n    )\n  }\n\n  addIsochrones(geometry, range, color, index) {\n    console.log('adding this isochron')\n    L.polygon(\n      geometry.map(function(coordString) {\n        return coordString.split(',')\n      }),\n      {\n        fillColor: color,\n        weight: 2,\n        opacity: 1,\n        color: 'white',\n        pane: 'isochronesPane',\n        index: index\n      }\n    )\n      .addTo(isochronesLayer)\n      .bindTooltip('Range: ' + range, { permanent: false, sticky: true })\n  }\n  addIsochronesMarker(location, idx, isPresent = false) {\n    if (!isPresent) {\n      const isochronesMarker = ExtraMarkers.icon({\n        icon: 'fa-number',\n        markerColor: 'purple',\n        shape: 'star',\n        prefix: 'fa',\n        number: (idx + 1).toString()\n      })\n\n      const that = this\n\n      L.marker(location.displayposition, {\n        icon: isochronesMarker,\n        draggable: true,\n        index: idx\n      })\n        .addTo(markersLayer)\n        .bindTooltip(location.title + ', ' + location.description, {\n          permanent: false\n        })\n        .on('dragend', function(e) {\n          that.updatePosition({\n            latLng: e.target.getLatLng(),\n            isoIndex: e.target.options.index\n          })\n        })\n    } else {\n      markersLayer.eachLayer(function(layer) {\n        if (layer.options.index === idx) {\n          layer.setTooltipContent(location.title + ', ' + location.description)\n        }\n      })\n    }\n  }\n\n  render() {\n    return <div id=\"map\" style={style} />\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  console.log(state, ownProps)\n  const isochronesControls = state.isochronesControls.controls\n  const mapEvents = state.mapEvents\n  return {\n    isochronesControls,\n    mapEvents\n  }\n}\n\nexport default connect(mapStateToProps)(Map)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Slider } from 'react-semantic-ui-range'\nimport { Label, Input, Button, Divider } from 'semantic-ui-react'\nimport { updateSettings } from '../actions/actions'\n\nconst transportModes = {\n  pedestrian: {\n    type: ['fastest', 'shortest'],\n    traffic: ['enabled', 'disabled']\n  },\n  car: {\n    type: ['fastest', 'shortest', 'traffic'],\n    traffic: ['enabled', 'disabled'],\n    consumptionModel: ['default', 'standard'],\n    customConsumptionDetails: {}\n  },\n  truck: {\n    type: ['fastest'],\n    shippedHazardousGoods: [],\n    limitedWeight: {},\n    weightPerAxle: {},\n    height: {},\n    width: {},\n    length: {},\n    tunnelCategory: [],\n    consumptionModel: ['default', 'standard'],\n    customConsumptionDetails: {}\n  }\n}\n\nconst rangeTypes = {\n  distance: {},\n  time: {}\n}\n\nclass Settings extends React.Component {\n  // constructor(props) {\n  //   super(props);\n  // }\n\n  static propTypes = {\n    userTextInput: PropTypes.string,\n    results: PropTypes.array,\n    isFetching: PropTypes.bool,\n    dispatch: PropTypes.func.isRequired,\n    controls: PropTypes.array.isRequired,\n    controlindex: PropTypes.number.isRequired\n  }\n\n  updateSettings() {\n    const { controls, controlindex, dispatch } = this.props\n\n    dispatch(\n      updateSettings({\n        controlIndex: controlindex,\n        settings: controls[controlindex].settings\n      })\n    )\n  }\n\n  handleClickMode(mode) {\n    const { controls, controlindex } = this.props\n\n    controls[controlindex].settings.mode = mode\n\n    this.updateSettings()\n  }\n\n  handleRangetype(rangetype) {\n    const { controls, controlindex } = this.props\n\n    controls[controlindex].settings.rangetype = rangetype\n\n    this.updateSettings()\n  }\n\n  handleRangeValueChange(e, { value }) {\n    const { controls, controlindex } = this.props\n\n    controls[controlindex].settings.range.value = value\n\n    this.updateSettings()\n  }\n\n  handleIntervalValueChange(e, { value }) {\n    const { controls, controlindex } = this.props\n\n    controls[controlindex].settings.interval.value = value\n\n    this.updateSettings()\n  }\n\n  render() {\n    const { controls, controlindex } = this.props\n\n    const rangetype =\n      controls[controlindex].settings.rangetype === 'time'\n        ? ' minutes'\n        : ' kilometers'\n\n    const rangeSettings = {\n      settings: {\n        ...controls[controlindex].settings.range,\n        start: controls[controlindex].settings.range.value,\n        onChange: value => {\n          controls[controlindex].settings.range.value = value\n\n          if (\n            controls[controlindex].settings.range.value <\n            controls[controlindex].settings.interval.value\n          ) {\n            controls[controlindex].settings.interval.value =\n              controls[controlindex].settings.range.value\n          }\n\n          controls[controlindex].settings.interval.max =\n            controls[controlindex].settings.range.value\n\n          this.updateSettings()\n        }\n      }\n    }\n\n    const intervalSettings = {\n      settings: {\n        ...controls[controlindex].settings.interval,\n        start: controls[controlindex].settings.interval.value,\n        onChange: value => {\n          controls[controlindex].settings.interval.value = value\n\n          this.updateSettings()\n        }\n      }\n    }\n\n    return (\n      <div>\n        <div className=\"mb3\">\n          <Label size=\"small\" color=\"purple\">\n            {'Travel mode'}\n          </Label>\n          <div className=\"mt3\">\n            <Button.Group basic size=\"small\">\n              {transportModes &&\n                Object.keys(transportModes).map((key, i) => (\n                  <Button\n                    active={key === controls[controlindex].settings.mode}\n                    key={i}\n                    mode={key}\n                    onClick={() => this.handleClickMode(key)}>\n                    {key}\n                  </Button>\n                ))}\n            </Button.Group>\n          </div>\n        </div>\n        <Divider />\n\n        <div className=\"mb3\">\n          <Label size=\"small\" color=\"purple\">\n            {'Range type'}\n          </Label>\n          <div className=\"mt3\">\n            <Button.Group basic size=\"small\">\n              {rangeTypes &&\n                Object.keys(rangeTypes).map((key, i) => (\n                  <Button\n                    active={key === controls[controlindex].settings.rangetype}\n                    key={i}\n                    mode={key}\n                    onClick={() => this.handleRangetype(key)}>\n                    {key}\n                  </Button>\n                ))}\n            </Button.Group>\n          </div>\n        </div>\n        <Divider />\n\n        <div>\n          <Label size=\"small\" color=\"purple\">\n            {'Maximum range'}\n          </Label>\n          <div className=\"mt3\">\n            <Slider\n              discrete\n              color=\"grey\"\n              value={controls[controlindex].settings.range.value}\n              inverted={false}\n              settings={rangeSettings.settings}\n            />\n            <div className=\"mt2 flex justify-between items-center\">\n              <Input\n                size=\"mini\"\n                placeholder=\"Enter Value\"\n                onChange={this.handleRangeValueChange.bind(this)}\n              />\n              <Label className=\"mt2\" color=\"grey\" size={'mini'}>\n                {controls[controlindex].settings.range.value + rangetype}\n              </Label>\n            </div>\n          </div>\n        </div>\n        <Divider />\n        <div>\n          <Label size=\"small\" color=\"purple\">\n            {'Interval step'}\n          </Label>\n          <div className=\"mt3\">\n            <Slider\n              discrete\n              color=\"grey\"\n              value={controls[controlindex].settings.interval.value}\n              inverted={false}\n              settings={intervalSettings.settings}\n            />\n            <div className=\"mt2 flex justify-between items-center\">\n              <Input\n                size=\"mini\"\n                placeholder=\"Enter Value\"\n                onChange={this.handleIntervalValueChange.bind(this)}\n              />\n              <Label className=\"mt2\" color=\"grey\" size={'mini'}>\n                {controls[controlindex].settings.interval.value + rangetype}\n              </Label>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  const { controls } = state.isochronesControls\n  return {\n    controls\n  }\n}\n\nexport default connect(mapStateToProps)(Settings)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport Settings from './Settings'\nimport {\n  Segment,\n  Search,\n  Icon,\n  Container,\n  Popup,\n  Accordion,\n  Divider,\n  Button\n} from 'semantic-ui-react'\nimport {\n  updateTextInput,\n  fetchHereGeocode,\n  updateSelectedAddress,\n  removeIsochronesControl,\n  fetchHereIsochrones\n} from '../actions/actions'\n\nimport { zoomToIsochrones } from '../actions/map'\n\nimport InlineEdit from 'react-edit-inline2'\nimport { debounce } from 'throttle-debounce'\n\nclass SearchControl extends React.Component {\n  static propTypes = {\n    userTextInput: PropTypes.string.isRequired,\n    results: PropTypes.array.isRequired,\n    isFetching: PropTypes.bool.isRequired,\n    isFetchingIsochrones: PropTypes.bool.isRequired,\n    dispatch: PropTypes.func.isRequired,\n    controls: PropTypes.array.isRequired,\n    isochronesResults: PropTypes.array,\n    controlindex: PropTypes.number.isRequired\n  }\n\n  constructor(props) {\n    super(props)\n\n    this.dataChanged = this.dataChanged.bind(this)\n\n    this.state = {\n      isochronesTitle: 'Isochrones -' + (props.controlindex + 1),\n      activeIndex: 0\n    }\n    this.handleSearchChange = this.handleSearchChange.bind(this)\n    this.handleResultSelect = this.handleResultSelect.bind(this)\n    this.fetchGeocodeResults = debounce(1000, this.fetchGeocodeResults)\n  }\n\n  handleClick = (e, titleProps) => {\n    const { index } = titleProps\n    const { activeIndex } = this.state\n    const newIndex = activeIndex === index ? -1 : index\n\n    this.setState({ activeIndex: newIndex })\n  }\n\n  fetchGeocodeResults() {\n    const { dispatch, userTextInput, controlindex } = this.props\n    dispatch(\n      fetchHereGeocode({\n        inputValue: userTextInput,\n        controlIndex: controlindex\n      })\n    )\n  }\n\n  handleSearchChange = event => {\n    const { dispatch, controlindex } = this.props\n\n    dispatch(\n      updateTextInput({\n        inputValue: event.target.value,\n        controlIndex: controlindex\n      })\n    )\n    this.fetchGeocodeResults()\n  }\n\n  // handleSelectionChange = event => {\n  //   console.log(event.target.value);\n  // };\n\n  handleResultSelect = (e, { result }) => {\n    const { dispatch, controlindex } = this.props\n\n    dispatch(\n      updateTextInput({\n        inputValue: result.title,\n        controlIndex: controlindex\n      })\n    )\n\n    dispatch(\n      updateSelectedAddress({\n        inputValue: result.title,\n        controlIndex: controlindex\n      })\n    )\n  }\n\n  customValidateText(text) {\n    return text.length > 0 && text.length < 64\n  }\n\n  dataChanged(data) {\n    this.setState({ ...data })\n  }\n\n  handleFetchIsochrones = () => {\n    const { dispatch, controlindex, controls } = this.props\n\n    let displayposition\n    for (let result of controls[controlindex].geocodeResults) {\n      if (result.selected) displayposition = result.displayposition\n    }\n\n    dispatch(\n      fetchHereIsochrones({\n        controlIndex: controlindex,\n        settings: controls[controlindex].settings,\n        center: displayposition\n      })\n    )\n  }\n\n  handleZoom = () => {\n    const { dispatch, controlindex } = this.props\n    dispatch(zoomToIsochrones(controlindex))\n  }\n\n  render() {\n    const {\n      isFetching,\n      isFetchingIsochrones,\n      userTextInput,\n      results,\n      controls,\n      controlindex,\n      isochronesResults\n    } = this.props\n\n    const handleRemoveControl = () => {\n      if (controls.length > 1) {\n        this.props.dispatch(\n          removeIsochronesControl({ controlIndex: controlindex })\n        )\n      }\n    }\n\n    const isResultSelected = () => {\n      for (let result of results) {\n        if (result.selected) return false\n      }\n\n      return true\n    }\n    return (\n      <Segment style={{ margin: '20px' }}>\n        <div className=\"mb2 justify-between flex flex-row items-center\">\n          <div>\n            <Popup\n              trigger={<Icon name=\"pencil\" />}\n              content=\"Edit name\"\n              size=\"mini\"\n            />\n\n            <InlineEdit\n              validate={this.customValidateText}\n              activeClassName=\"editing\"\n              text={this.state.isochronesTitle}\n              paramName=\"isochronesTitle\"\n              change={this.dataChanged}\n              style={{\n                minWidth: 150,\n                display: 'inline-block',\n                margin: '0 0 0 0',\n                padding: 0,\n                fontWeight: 'bold',\n                fontSize: 15,\n                outline: 'none',\n                border: 'none'\n              }}\n            />\n          </div>\n          {isochronesResults && isochronesResults.length > 0 && (\n            <Popup\n              trigger={\n                <Button\n                  circular\n                  size=\"mini\"\n                  icon=\"unhide\"\n                  style={{ float: 'right' }}\n                  onClick={this.handleShow}\n                  className=\"pr3\"\n                />\n              }\n              content=\"Toggle on map\"\n              size=\"mini\"\n            />\n          )}\n          {isochronesResults && isochronesResults.length > 0 && (\n            <Popup\n              trigger={\n                <Button\n                  circular\n                  icon=\"expand arrows alternate\"\n                  style={{ float: 'right' }}\n                  size=\"mini\"\n                  onClick={this.handleZoom}\n                  className=\"pr4\"\n                />\n              }\n              content=\"Zoom\"\n              size=\"mini\"\n            />\n          )}\n          <Popup\n            trigger={\n              <Button\n                circular\n                size=\"mini\"\n                icon=\"remove\"\n                style={{ float: 'right' }}\n                onClick={handleRemoveControl}\n              />\n            }\n            content=\"Remove\"\n            size=\"mini\"\n          />\n        </div>\n        <Divider fitted />\n        <div className=\"flex justify-between items-center mt3\">\n          <Search\n            onSearchChange={this.handleSearchChange}\n            onResultSelect={this.handleResultSelect}\n            type=\"text\"\n            fluid\n            input={{ fluid: true }}\n            loading={isFetching}\n            className=\"flex-grow-1 mr2\"\n            results={results}\n            value={userTextInput}\n            placeholder=\"Find Address ...\"\n          />\n          <Popup\n            trigger={\n              <Button\n                circular\n                loading={isFetchingIsochrones}\n                disabled={isResultSelected()}\n                color=\"purple\"\n                icon=\"globe\"\n                onClick={this.handleFetchIsochrones}\n              />\n            }\n            content=\"Compute isochrones\"\n            size=\"mini\"\n          />\n        </div>\n        <Container className=\"mt2\">\n          <Accordion>\n            <Accordion.Title\n              active={this.state.activeIndex === 0}\n              index={0}\n              onClick={this.handleClick}>\n              <Icon name=\"dropdown\" />\n              Settings\n            </Accordion.Title>\n            <Accordion.Content active={this.state.activeIndex === 0}>\n              <Settings controlindex={controlindex} />\n            </Accordion.Content>\n          </Accordion>\n        </Container>\n      </Segment>\n    )\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  const userTextInput =\n    state.isochronesControls.controls[ownProps.controlindex].userInput\n  const results =\n    state.isochronesControls.controls[ownProps.controlindex].geocodeResults\n  const isochronesResults =\n    state.isochronesControls.controls[ownProps.controlindex].isochrones.results\n  const isFetching =\n    state.isochronesControls.controls[ownProps.controlindex].isFetching\n  const isFetchingIsochrones =\n    state.isochronesControls.controls[ownProps.controlindex]\n      .isFetchingIsochrones\n  const controls = state.isochronesControls.controls\n\n  const mapEvents = state.mapEvents\n\n  return {\n    userTextInput,\n    results,\n    isFetching,\n    isFetchingIsochrones,\n    controls,\n    mapEvents,\n    isochronesResults\n  }\n}\n\nexport default connect(mapStateToProps)(SearchControl)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Segment, Button, Popup } from 'semantic-ui-react'\nimport SearchControl from './SearchControl'\nimport { addIsochronesControl } from '../actions/actions'\n\nconst segmentStyle = {\n  zIndex: 999,\n  position: 'absolute',\n  width: '400px',\n  top: '0',\n  left: '10px',\n  maxHeight: 'calc(100vh)',\n  padding: '0px'\n}\n\nclass Controls extends React.Component {\n  constructor(props) {\n    super(props)\n    this.handleAddIsochronesControl = this.handleAddIsochronesControl.bind(this)\n  }\n\n  static propTypes = {\n    dispatch: PropTypes.func.isRequired,\n    controls: PropTypes.array.isRequired\n  }\n\n  handleAddIsochronesControl = () => {\n    this.props.dispatch(addIsochronesControl())\n  }\n\n  handleSettings = () => {\n    console.log('open settings')\n  }\n\n  render() {\n    const { controls } = this.props\n    return (\n      <Segment className=\"flex flex-column\" style={segmentStyle}>\n        {/*<div\n          style={{ height: '50px', borderBottom: '2px solid #A333C8' }}\n          className=\"flex justify-between items-center pa3\">\n          <span className=\"b f4\">HERE Isolines App</span>\n          <Popup\n            trigger={\n              <Icon\n                name=\"setting\"\n                size=\"large\"\n                color=\"black\"\n                onClick={this.handleSettings}\n              />\n            }\n            content=\"Settings\"\n            size=\"mini\"\n          />\n        </div>*/}\n        <div>\n          <div style={{ flex: 1, display: 'flex', minHeight: '0px' }}>\n            <div style={{ flex: 1, overflow: 'auto' }}>\n              <div\n                style={{\n                  maxHeight: 'calc(100vh - 2vw)',\n                  overflow: 'auto'\n                }}>\n                {controls &&\n                  controls.map((object, i) => (\n                    <SearchControl key={i} controlindex={i} />\n                  ))}\n                <div\n                  style={{\n                    marginLeft: '20px',\n                    marginBottom: '20px',\n                    marginTop: '0px'\n                  }}>\n                  <Popup\n                    trigger={\n                      <Button\n                        circular\n                        icon=\"plus\"\n                        className=\"ma3\"\n                        onClick={this.handleAddIsochronesControl}\n                      />\n                    }\n                    content=\"Add\"\n                    size=\"mini\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </Segment>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  const { controls } = state.isochronesControls\n  return {\n    controls\n  }\n}\n\nexport default connect(mapStateToProps)(Controls)\n","import React from 'react'\nimport Map from './Map/Map'\nimport Controls from './Controls/Controls'\n\nclass App extends React.Component {\n  render() {\n    return (\n      <div>\n        <Map />\n        <Controls className={'isoControls'} />\n      </div>\n    )\n  }\n}\nexport default App\n","import React from 'react'\nimport { render } from 'react-dom'\nimport * as serviceWorker from './serviceWorker'\nimport { createStore, applyMiddleware } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport { Provider } from 'react-redux'\nimport thunk from 'redux-thunk'\nimport { createLogger } from 'redux-logger'\nimport reducer from './reducers'\nimport App from './App'\nimport './index.css' // postCSS import of CSS module\n\nconst middleware = [thunk]\nif (process.env.NODE_ENV !== 'production') {\n  middleware.push(createLogger())\n}\n\nconst store = createStore(\n  reducer,\n  composeWithDevTools(applyMiddleware(...middleware))\n)\n\nrender(\n  <Provider store={store}>\n    {' '}\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}